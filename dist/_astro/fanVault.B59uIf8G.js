import{c as A}from"./index.BtUICepX.js";const G=[{id:"visionary",label:"Visionary",tier:"core",description:"Future-facing selector with clear focus.",svg:'<svg viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="32" cy="32" r="25" stroke="currentColor" stroke-width="2.8"/><path d="M10 32c5-9 13-14 22-14s17 5 22 14c-5 9-13 14-22 14s-17-5-22-14z" stroke="currentColor" stroke-width="2.8" stroke-linejoin="round"/><circle cx="32" cy="32" r="6.5" fill="currentColor"/><circle cx="36.5" cy="27.5" r="1.7" fill="white"/></svg>'},{id:"peace-maker",label:"Peace Maker",tier:"core",description:"Calm frequency and balanced energy.",svg:'<svg viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="32" cy="32" r="25" stroke="currentColor" stroke-width="2.8"/><path d="M32 16v20M32 36L18.5 52M32 36L45.5 52" stroke="currentColor" stroke-width="2.8" stroke-linecap="round"/><circle cx="32" cy="32" r="3" fill="currentColor"/></svg>'},{id:"rastafari",label:"Rastafari",tier:"elite",description:"Rasta identity with lionheart roots.",svg:'<svg viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="32" cy="32" r="25" stroke="currentColor" stroke-width="2.8"/><path d="M24 24l3-4 3 4 2-4 2 4 2-4 2 4 3-4 3 4" stroke="currentColor" stroke-width="2.8" stroke-linecap="round" stroke-linejoin="round"/><path d="M21 43c0-6.5 5-11 11-11s11 4.5 11 11" stroke="currentColor" stroke-width="2.8" stroke-linecap="round"/><circle cx="27.5" cy="33" r="1.8" fill="currentColor"/><circle cx="36.5" cy="33" r="1.8" fill="currentColor"/></svg>'},{id:"roots-man",label:"Roots Man",tier:"elite",description:"Throwback soul, classic roots spirit.",svg:'<svg viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="32" cy="32" r="25" stroke="currentColor" stroke-width="2.8"/><circle cx="32" cy="26" r="8" stroke="currentColor" stroke-width="2.8"/><path d="M18 48c0-7 6-12 14-12s14 5 14 12" stroke="currentColor" stroke-width="2.8" stroke-linecap="round"/><path d="M24 18h16" stroke="currentColor" stroke-width="2.8" stroke-linecap="round"/></svg>'},{id:"roots-gyal",label:"Roots Gyal",tier:"elite",description:"Throwback soul with queen presence.",svg:'<svg viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="32" cy="32" r="25" stroke="currentColor" stroke-width="2.8"/><circle cx="32" cy="25.5" r="7.5" stroke="currentColor" stroke-width="2.8"/><path d="M18 48c0-7 6-12 14-12s14 5 14 12" stroke="currentColor" stroke-width="2.8" stroke-linecap="round"/><path d="M24 19l8-6 8 6" stroke="currentColor" stroke-width="2.8" stroke-linecap="round" stroke-linejoin="round"/></svg>'},{id:"vibes-youth",label:"Vibes Youth",tier:"core",description:"Hype man energy and crowd ignition.",svg:'<svg viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="32" cy="32" r="25" stroke="currentColor" stroke-width="2.8"/><path d="M24 36l8-8 8 8" stroke="currentColor" stroke-width="2.8" stroke-linecap="round" stroke-linejoin="round"/><path d="M14 30h8M42 30h8M19 20l6 5M45 20l-6 5" stroke="currentColor" stroke-width="2.8" stroke-linecap="round"/><circle cx="32" cy="42.5" r="2.4" fill="currentColor"/></svg>'},{id:"starigh-gangsta",label:"Straight Gangsta",tier:"legend",description:"Gangster badge, fearless and direct.",svg:'<svg viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="32" cy="32" r="25" stroke="currentColor" stroke-width="2.8"/><rect x="20" y="22" width="24" height="10" rx="2" stroke="currentColor" stroke-width="2.8"/><path d="M20 27h24M24 42h16" stroke="currentColor" stroke-width="2.8" stroke-linecap="round"/><path d="M28 32l-4 10M36 32l4 10" stroke="currentColor" stroke-width="2.8" stroke-linecap="round"/></svg>'},{id:"gyalis",label:"Gyalis",tier:"core",description:"Womanizer charm and social magnetism.",svg:'<svg viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="32" cy="32" r="25" stroke="currentColor" stroke-width="2.8"/><path d="M26.5 41c-4.6-3.2-7.5-6.2-7.5-10.6 0-3.7 2.8-6.5 6.5-6.5 2.2 0 4 1 5.3 2.8 1.3-1.8 3.1-2.8 5.3-2.8 3.7 0 6.5 2.8 6.5 6.5 0 4.4-2.9 7.4-7.5 10.6" stroke="currentColor" stroke-width="2.8" stroke-linecap="round"/><path d="M32 15v6M29 18h6" stroke="currentColor" stroke-width="2.8" stroke-linecap="round"/></svg>'},{id:"top-man",label:"Top Man",tier:"legend",description:"Boss man authority and leadership.",svg:'<svg viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="32" cy="32" r="25" stroke="currentColor" stroke-width="2.8"/><path d="M17 44l5-16 10 8 10-8 5 16H17z" stroke="currentColor" stroke-width="2.8" stroke-linejoin="round"/><path d="M24 22l8-7 8 7" stroke="currentColor" stroke-width="2.8" stroke-linecap="round"/><path d="M29 45h6" stroke="currentColor" stroke-width="2.8" stroke-linecap="round"/></svg>'},{id:"top-gyal",label:"Top Gyal",tier:"legend",description:"Boss woman status with top-tier presence.",svg:'<svg viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="32" cy="32" r="25" stroke="currentColor" stroke-width="2.8"/><path d="M16 44l6-17 10 8 10-8 6 17H16z" stroke="currentColor" stroke-width="2.8" stroke-linejoin="round"/><circle cx="22" cy="24" r="2.6" fill="currentColor"/><circle cx="32" cy="17" r="2.6" fill="currentColor"/><circle cx="42" cy="24" r="2.6" fill="currentColor"/><path d="M24 47h16" stroke="currentColor" stroke-width="2.8" stroke-linecap="round"/></svg>'}],h="visionary",b="the-performa-fan-vault-users-v1",v="the-performa-fan-vault-session-v1",L="the-performa-badges-v1",_="https://iahvjkodgrwatcpjdxna.supabase.co",y="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlhaHZqa29kZ3J3YXRjcGpkeG5hIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzA3MDEwMzAsImV4cCI6MjA4NjI3NzAzMH0.0crxct3Pq52ZhymeTQ05_k8tZdg4KtYaZw92B7d_DKM",l=!!y;let k=null;const c=()=>!l||!_||!y?null:k||(k=A(_,y,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0}}),k),g=()=>new Date().toISOString(),E=()=>`vault_${Math.random().toString(36).slice(2,10)}_${Date.now().toString(36)}`,x=(e,t)=>{if(typeof window>"u")return t;try{const r=localStorage.getItem(e);return r?JSON.parse(r):t}catch{return t}},F=(e,t)=>{localStorage.setItem(e,JSON.stringify(t))},d=()=>{window.dispatchEvent(new CustomEvent("fanvault:changed"))},p=()=>x(b,[]),C=e=>{F(b,e),d()},I=()=>typeof window>"u"?"":localStorage.getItem(v)||"",w=()=>{const e=I();if(!e)return null;const t=p().find(s=>s.id===e);if(!t)return null;const{password:r,...o}=t;return o},j=(e,t,r)=>{const o=e.trim(),s=t.trim().toLowerCase();if(!o||!s||!r)return{ok:!1,error:"All fields are required."};const n=p();if(n.some(q=>q.email===s))return{ok:!1,error:"Email is already registered on this device."};const i={id:E(),name:o,email:s,password:r,createdAt:g(),bio:"",profileBadgeId:h,favorites:[]},a=[...n,i];C(a),localStorage.setItem(v,i.id),d();const{password:m,...f}=i;return{ok:!0,user:f}},J=(e,t)=>{const r=e.trim().toLowerCase(),o=p().find(i=>i.email===r&&i.password===t);if(!o)return{ok:!1,error:"Invalid email or password."};localStorage.setItem(v,o.id),d();const{password:s,...n}=o;return{ok:!0,user:n}},z=()=>{localStorage.removeItem(v),d()},P=e=>{const t=w();if(!t)return null;const o=p().map(a=>a.id===t.id?{...a,name:e.name?.trim()?e.name.trim():a.name,bio:typeof e.bio=="string"?e.bio:a.bio,profileBadgeId:typeof e.profileBadgeId=="string"?e.profileBadgeId:a.profileBadgeId}:a);C(o);const s=o.find(a=>a.id===t.id)||null;if(!s)return null;const{password:n,...i}=s;return i},V=e=>{const t=w();if(!t)return{ok:!1,error:"Please register or log in to save favorites."};const o=p().map(i=>{if(i.id!==t.id)return i;const m=i.favorites.some(f=>f.type===e.type&&f.id===e.id)?i.favorites.filter(f=>!(f.type===e.type&&f.id===e.id)):[{...e,savedAt:g()},...i.favorites];return{...i,favorites:m}});return C(o),{ok:!0,favorited:o.find(i=>i.id===t.id).favorites.some(i=>i.type===e.type&&i.id===e.id)}},O=()=>{const e=w();return e?e.favorites:[]},B=()=>x(L,[]),R=e=>({type:e.type,id:e.item_id,title:e.title,href:e.href,image:e.image||void 0,savedAt:e.saved_at||g()}),M=async(e,t,r="Fan")=>{const o=c();if(!o)return;const{data:s}=await o.from("fan_profiles").select("id,name,bio,created_at").eq("id",e).maybeSingle();s||await o.from("fan_profiles").insert({id:e,email:t,name:r,bio:""})},S=async(e,t)=>{const r=c();if(!r)return;const o=p(),s=I(),n=o.find(i=>i.id===s)||o.find(i=>i.email===t.toLowerCase());n&&(await r.from("fan_profiles").upsert({id:e,email:t,name:n.name,bio:n.bio||""}),n.profileBadgeId&&await r.auth.updateUser({data:{profileBadgeId:n.profileBadgeId}}),n.favorites.length&&await r.from("fan_favorites").upsert(n.favorites.map(i=>({user_id:e,type:i.type,item_id:i.id,title:i.title,href:i.href,image:i.image||null,saved_at:i.savedAt})),{onConflict:"user_id,type,item_id"}),await U(e))},u=async()=>{const e=c();if(!e)return null;const{data:t}=await e.auth.getUser(),r=t.user;if(!r||!r.email)return null;await M(r.id,r.email,r.user_metadata?.name||"Fan");const[{data:o},{data:s}]=await Promise.all([e.from("fan_profiles").select("id,name,email,bio,created_at").eq("id",r.id).maybeSingle(),e.from("fan_favorites").select("type,item_id,title,href,image,saved_at").eq("user_id",r.id).order("saved_at",{ascending:!1})]);return{id:r.id,name:o?.name||r.user_metadata?.name||"Fan",email:o?.email||r.email,createdAt:o?.created_at||r.created_at||g(),bio:o?.bio||"",profileBadgeId:r.user_metadata?.profileBadgeId||h,favorites:(s||[]).map(R)}},N=async()=>l?u():w(),Y=async(e,t,r)=>{if(!l)return j(e,t,r);const o=c();if(!o)return{ok:!1,error:"Vault is not configured."};const s=e.trim(),n=t.trim().toLowerCase();if(!s||!n||!r)return{ok:!1,error:"All fields are required."};const{data:i,error:a}=await o.auth.signUp({email:n,password:r,options:{data:{name:s,profileBadgeId:h}}});if(a)return{ok:!1,error:a.message};if(!i.user)return{ok:!1,error:"Signup failed. Try again."};if(await M(i.user.id,n,s),await S(i.user.id,n),!i.session)return d(),{ok:!0,requiresConfirm:!0,user:{id:i.user.id,name:s,email:n,createdAt:i.user.created_at||g(),bio:"",profileBadgeId:h,favorites:[]}};const m=await u();return d(),{ok:!0,user:m}},Z=async(e,t)=>{if(!l)return J(e,t);const r=c();if(!r)return{ok:!1,error:"Vault is not configured."};const{error:o}=await r.auth.signInWithPassword({email:e.trim().toLowerCase(),password:t});if(o)return{ok:!1,error:o.message};const s=await u();return s?(await S(s.id,s.email),d(),{ok:!0,user:s}):{ok:!1,error:"Could not load your profile."}},D=async e=>{if(!l)return{ok:!1,error:"Cloud auth is not configured."};const t=c();if(!t)return{ok:!1,error:"Vault is not configured."};const r=typeof window<"u"?new URL("/fan-club/",window.location.origin).toString():void 0,{error:o}=await t.auth.signInWithOAuth({provider:e,options:{redirectTo:r}});return o?{ok:!1,error:o.message}:{ok:!0,redirected:!0}},K=async()=>{if(!l){z();return}const e=c();e&&(await e.auth.signOut(),d())},H=async e=>{if(!l)return P(e);const t=c();if(!t)return null;const r=await u();if(!r)return null;await t.from("fan_profiles").upsert({id:r.id,email:r.email,name:e.name?.trim()?e.name.trim():r.name,bio:typeof e.bio=="string"?e.bio:r.bio}),typeof e.profileBadgeId=="string"&&await t.auth.updateUser({data:{profileBadgeId:e.profileBadgeId}});const o=await u();return d(),o},W=async(e,t)=>{if(!l){const n=w();return n?n.favorites.some(i=>i.type===e&&i.id===t):!1}const r=c();if(!r)return!1;const o=await u();if(!o)return!1;const{data:s}=await r.from("fan_favorites").select("item_id").eq("user_id",o.id).eq("type",e).eq("item_id",t).maybeSingle();return!!s},X=async e=>{if(!l)return V(e);const t=c();if(!t)return{ok:!1,error:"Vault is not configured."};const r=await u();if(!r)return{ok:!1,error:"Please register or log in to save favorites."};const{data:o}=await t.from("fan_favorites").select("item_id").eq("user_id",r.id).eq("type",e.type).eq("item_id",e.id).maybeSingle();return o?(await t.from("fan_favorites").delete().eq("user_id",r.id).eq("type",e.type).eq("item_id",e.id),d(),{ok:!0,favorited:!1}):(await t.from("fan_favorites").upsert({user_id:r.id,type:e.type,item_id:e.id,title:e.title,href:e.href,image:e.image||null,saved_at:g()},{onConflict:"user_id,type,item_id"}),d(),{ok:!0,favorited:!0})},$=async()=>{if(!l)return O();const e=await u();return e?e.favorites:[]},U=async e=>{if(!l)return;const t=c();if(!t)return;const r=B();if(!r.length)return;let o=e;o||(o=(await u())?.id),o&&await t.from("fan_badges").upsert(r.map(s=>({user_id:o,badge_id:s.id,label:s.label,tier:s.tier||null,tip:s.tip||null,updated_at:g()})),{onConflict:"user_id,badge_id"})},Q=async()=>{if(!l)return B();const e=c();if(!e)return[];const t=await u();if(!t)return[];await U(t.id);const{data:r}=await e.from("fan_badges").select("badge_id,label,tier,tip").eq("user_id",t.id).order("updated_at",{ascending:!1});return(r||[]).map(o=>({id:o.badge_id,label:o.label,tier:o.tier||void 0,tip:o.tip||void 0}))};export{$ as a,Q as b,Z as c,h as d,D as e,W as f,N as g,l as i,K as l,G as p,Y as r,U as s,X as t,H as u};
