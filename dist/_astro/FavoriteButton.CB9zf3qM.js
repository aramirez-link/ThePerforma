import{j as d}from"./jsx-runtime.TBa3i5EZ.js";import{r as t}from"./index.CVf8TyFT.js";import{P as p,Q as g}from"./fanVault.BDzHPXqn.js";import"./index.BtUICepX.js";function E({type:r,itemId:a,title:u,href:f,image:v,compact:m=!1}){const[n,l]=t.useState(!1),[o,s]=t.useState(""),[i,c]=t.useState(!1);t.useEffect(()=>{const e=()=>{p(r,a).then(l)};return e(),window.addEventListener("fanvault:changed",e),()=>window.removeEventListener("fanvault:changed",e)},[r,a]),t.useEffect(()=>{if(!o)return;const e=window.setTimeout(()=>s(""),1500);return()=>window.clearTimeout(e)},[o]);const x=async()=>{c(!0);const e=await g({type:r,id:a,title:u,href:f,image:v});if(c(!1),!e.ok){s(e.error);return}l(e.favorited),s(e.favorited?"Saved to Fan Vault":"Removed from Fan Vault")};return d.jsxs("div",{className:"relative inline-flex flex-col items-end",children:[d.jsx("button",{type:"button",onClick:()=>void x(),disabled:i,className:`rounded-full border px-3 py-1 text-[10px] uppercase tracking-[0.2em] transition ${n?"border-gold/70 bg-gold/15 text-gold":"border-white/25 bg-black/50 text-white/70 hover:border-gold/50 hover:text-gold"} ${m?"":"md:px-4 md:py-2"} ${i?"opacity-60":""}`,"aria-pressed":n,children:i?"...":n?"Saved":"Save"}),o&&d.jsx("span",{className:"mt-2 rounded-md bg-black/80 px-2 py-1 text-[10px] text-white/80",children:o})]})}export{E as default};
